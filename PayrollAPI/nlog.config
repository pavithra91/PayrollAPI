<?xml version="1.0" encoding="utf-8" ?>
 <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       autoReload="true" internalLogLevel="info" 
       internalLogFile="internalLog.txt" 
       internalLogToConsole="true">
   <extensions>
     <add assembly="NLog.Web.AspNetCore" />
   </extensions>
   <!-- the targets to write to -->
   <targets> 
     <target name="database" xsi:type="Database"
       dbProvider="MySqlConnector.MySqlConnection, MySqlConnector"
       connectionString="Server=13.233.230.0;Port=3306;Database=payrolldb;Uid=devuser;Pwd=Cpstl@123;SslMode=None">
       <commandtext>INSERT INTO payrolldb.SysLog (loggedDate, application, `level`, message) VALUES(@date, @app, @lvl, @msg)</commandtext>
       <parameter name="@date" layout="${date}" />
        <parameter name="@application" layout="${machinename}" />
		 <parameter name="@lvl" layout="${level}" />
       <parameter name="@msg" layout="${message}" />
     </target> 
   </targets>
   
   <!-- rules to map from logger name to target -->
   <rules>
     <logger name="Microsoft.*" maxLevel="Info" final="true" />
     <logger name="*" minlevel="Trace" writeTo="database" />
     
   </rules>
 </nlog> 